<!DOCTYPE html>
<html lang="tr">

<%- include("../inc/head") %>

    <body>
        <div class="custList">
            <%- include("../inc/leftbar") %>
                <div class="userList">
                    <div class="selectBlok">
                        <h1>Blok Sayısı</h1>
                        <div class="selectFlatCircleGroup">
                            <div class="selectFlatCircle" name="1">1</div>
                            <div class="selectFlatCircle" name="2">2</div>
                            <div class="selectFlatCircle" name="3">3</div>
                            <div class="selectFlatCircle" name="4">4</div>
                            <div class="selectFlatCircle" name="5">5</div>
                            <div class="selectFlatCircle" name="6">6</div>
                            <div class="selectFlatCircle" name="7">7</div>
                            <div class="selectFlatCircle" name="8">8</div>
                            <div class="selectFlatCircle" name="9">9</div>
                            <div class="selectFlatCircle" name="10">10</div>
                            <div class="selectFlatCircle" name="11">11</div>
                            <div class="selectFlatCircle" name="12">12</div>
                            <div class="selectFlatCircle" name="13">13</div>
                            <div class="selectFlatCircle" name="14">14</div>
                            <div class="selectFlatCircle" name="15">15</div>
                            <div class="selectFlatCircle" name="16">16</div>
                            <div class="selectFlatCircle" name="17">17</div>
                            <div class="selectFlatCircle" name="18">18</div>
                            <div class="selectFlatCircle" name="19">19</div>
                            <div class="selectFlatCircle" name="20">20</div>
                        </div>
                        <div class="blokinputGroup"></div>
                    </div>
                </div>
        </div>
    </body>
    <script>

        $(".selectFlatCircle").click(function () {
            $(".blokinputGroup").html("")
            console.log($(this).attr("name"))
            var blokSize = $(this).attr("name")
            for (var i = 1; i <= blokSize; i++) {
                $(".blokinputGroup").append("<label for='' value='1'>Blok : " + i + " </label><br><input type='text'><br>")
            }
        })

        $("#saveFlat").click(async function () {
            var daireModel = {
                Daire: {
                    BLOK: "BlokAdi",
                    KapiNo: "KapiNo",
                    BulunduğuKat: "Kat",
                    MetreKare: "m2",
                    ArsaPayi: "arsaPay",
                    aylikAidatTutari: "aidat"
                },
                MalSahibi: {
                    AdSoyad: "adSoyad",
                    TCKN: "TCKN",
                    dTarihi: "GG/AA/YYYY",
                    SatinAlmaTarihi: "buyDate",
                    gsm: "telNo",
                    gsm2: "telNo2",
                    homePhone: "evTelefonu",
                    ePosta: "e-mail",
                    ePosta2: "e-mail2",
                    evadresi: "ev-adresi",
                    isadresi: "is-adresi",
                    plaka: "plakaNo",
                    plaka2: "plakoNo2",
                    Devreden: {
                        DevredenTarih: "Tarih",
                        DevredenBorcBakiye: "Bakiye",
                        DevredenAlacakBakiye: "alacakBakiye"
                    }
                },
                Kiraci: {
                    AdSoyad: "adSoyad",
                    TCKN: "TCKN",
                    dTarihi: "GG/AA/YYYY",
                    KiraBaslangic: "buyDate",
                    gsm: "telNo",
                    gsm2: "telNo2",
                    homePhone: "evTelefonu",
                    ePosta: "e-mail",
                    ePosta2: "e-mail2",
                    evadresi: "ev-adresi",
                    isadresi: "is-adresi",
                    plaka: "plakaNo",
                    plaka2: "plakoNo2",
                    Devreden: {
                        DevredenTarih: "Tarih",
                        DevredenBorcBakiye: "Bakiye",
                        DevredenAlacakBakiye: "alacakBakiye"
                    }
                }
            }

            await daireekle(daireModel)
            console.log(daireModel)

        })

        async function daireekle(x) {
            console.log(x)
            const result = await $.ajax({
                url: '/daire-ekle',
                type: 'post',
                dataType: "json",
                data: x,
                success: function (response) {
                    console.log("Kayıt Gerçekleşti")

                    // setTimeout(() => {
                    //     location.reload();
                    // }, 1000);
                },
                error: function (response) {
                    console.log("Hata")
                }
            })
            return result;
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF"
        crossorigin="anonymous"></script>

</html>